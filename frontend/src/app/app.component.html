<!-- Header -->
<mat-toolbar color="primary">
  <span class="text-xl font-medium">🔍 GitHub Repository Search</span>
</mat-toolbar>

<!-- Main Container -->
<div class="min-h-screen bg-gray-100 p-4">
  <div class="max-w-6xl mx-auto">
    
    <!-- Search Section -->
    <app-search (searchEvent)="onSearch($event)"></app-search>

  <!-- Loading Spinner -->
  <div *ngIf="loading" class="flex justify-center py-8">
    <mat-spinner diameter="50"></mat-spinner>
  </div>

  <!-- Results Section -->
  <div *ngIf="!loading && repositories.length > 0" class="space-y-6">
    
    <!-- Results Header -->
    <div class="flex justify-between items-center">
      <h2 class="text-2xl font-semibold text-gray-800">
        {{ repositoryConnection?.totalCount | number }} repositórios encontrados
      </h2>
      <span class="text-sm text-gray-500">
        Página {{ searchParams?.page || 1 }} de {{ Math.ceil((repositoryConnection?.totalCount || 0) / (searchParams?.perPage || 10)) }}
      </span>
    </div>

    <!-- Repository List -->
    <app-repository-list 
      [repositories]="repositories"
      [loading]="loading"
      [totalCount]="repositoryConnection?.totalCount || 0">
    </app-repository-list>

    <!-- Pagination -->
    <div class="flex justify-center pt-6">
      <app-pagination
        [currentPage]="searchParams?.page || 1"
        [hasNextPage]="repositories.length === (searchParams?.perPage || 10)"
        [hasPreviousPage]="(searchParams?.page || 1) > 1"
        (pageChange)="onPageChange($event)">
      </app-pagination>
    </div>

  </div>

    <!-- Empty State -->
    <div *ngIf="!loading && repositories.length === 0 && searchParams?.query" class="text-center py-12">
      <div class="bg-white rounded-lg shadow-md p-8 max-w-lg mx-auto">
        <div class="text-5xl text-gray-400 mb-3">🔍</div>
        <h3 class="text-xl font-medium text-gray-700 mb-2">Nenhum resultado encontrado</h3>
        <p class="text-gray-500">Tente buscar com outros termos</p>
      </div>
    </div>

    <!-- Welcome State -->
    <div *ngIf="!searchParams?.query && !loading" class="text-center py-16">
      <div class="bg-white rounded-lg shadow-md p-8 max-w-lg mx-auto">
        <div class="text-6xl mb-4">📦</div>
        <h2 class="text-2xl font-light text-gray-800 mb-3">Busque repositórios no GitHub</h2>
        <p class="text-gray-600">Digite um termo acima para começar sua pesquisa</p>
      </div>
    </div>

  </div>
</div>