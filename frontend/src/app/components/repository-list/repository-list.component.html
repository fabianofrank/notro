<!-- 
üìã REPOSITORY LIST TEMPLATE - Lista de reposit√≥rios com cards Material
FEATURES: Cards responsivos + informa√ß√µes principais + a√ß√µes
-->

<div class="repository-list">
  
  <!-- Loading state -->
  <div *ngIf="loading" class="loading-container text-center py-8">
    <mat-icon class="loading-icon animate-spin text-4xl text-gray-500">refresh</mat-icon>
    <p class="text-gray-600 mt-2">Buscando reposit√≥rios...</p>
  </div>

  <!-- Results header -->
  <div *ngIf="!loading && repositories.length > 0" class="results-header mb-4">
    <p class="text-gray-600">
      <strong>{{ totalCount | number }}</strong> reposit√≥rios encontrados
    </p>
  </div>

  <!-- Repository cards -->
  <div *ngIf="!loading && repositories.length > 0" class="grid gap-4 md:grid-cols-2 lg:grid-cols-3">
    
    <mat-card *ngFor="let repo of repositories" class="repository-card h-full">
      <mat-card-header>
        
        <!-- Owner avatar -->
        <div mat-card-avatar class="repository-avatar">
          <img [src]="repo.owner.avatarUrl" [alt]="repo.owner.login" class="rounded-full">
        </div>
        
        <!-- Repository title -->
        <mat-card-title class="repository-title text-lg">
          {{ repo.name }}
        </mat-card-title>
        
        <!-- Owner name -->
        <mat-card-subtitle class="repository-owner cursor-pointer hover:text-blue-600" 
                          (click)="openOwner(repo.owner.url)">
          {{ repo.owner.login }}
        </mat-card-subtitle>
      </mat-card-header>

      <mat-card-content class="repository-content">
        
        <!-- Description -->
        <p class="repository-description text-gray-700 mb-4 line-clamp-3">
          {{ repo.description || 'Sem descri√ß√£o dispon√≠vel' }}
        </p>

        <!-- Language chip -->
        <div class="repository-language mb-4" *ngIf="repo.language">
          <mat-chip-set>
            <mat-chip>{{ repo.language }}</mat-chip>
          </mat-chip-set>
        </div>

        <!-- Stats -->
        <div class="repository-stats grid grid-cols-3 gap-2 text-sm text-gray-600">
          
          <div class="stat-item text-center">
            <mat-icon class="text-yellow-500">star</mat-icon>
            <span class="block">{{ formatNumber(repo.stargazersCount) }}</span>
          </div>

          <div class="stat-item text-center">
            <mat-icon class="text-blue-500">visibility</mat-icon>
            <span class="block">{{ formatNumber(repo.watchersCount) }}</span>
          </div>

          <div class="stat-item text-center">
            <mat-icon class="text-green-500">call_split</mat-icon>
            <span class="block">{{ formatNumber(repo.forksCount) }}</span>
          </div>
          
        </div>

        <!-- Updated date -->
        <p class="repository-updated text-xs text-gray-500 mt-4">
          Atualizado em {{ formatDate(repo.updatedAt) }}
        </p>

      </mat-card-content>

      <mat-card-actions align="end">
        <button mat-button color="primary" (click)="openRepository(repo.url)">
          <mat-icon>open_in_new</mat-icon>
          Ver no GitHub
        </button>
      </mat-card-actions>

    </mat-card>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && repositories.length === 0" class="empty-state text-center py-12">
    <mat-icon class="text-gray-400 text-6xl mb-4">search_off</mat-icon>
    <h3 class="text-xl text-gray-600 mb-2">Nenhum reposit√≥rio encontrado</h3>
    <p class="text-gray-500">Tente buscar por outros termos</p>
  </div>

</div>